{% extends 'proyectos/proyecto_detalles.html' %}
{% block titulo %}{{ sprint.nombre }}{% endblock titulo %}
{% block sprint %}
    <h2>Sprint: {{ sprint.nombre }}</h2>
{% endblock sprint %}
{% block cuerpo %}
<h3>Informacion general</h3>
    <div class="contenido" style="display: block">
        <h3>Estado</h3>
        <p>{{ sprint.estado }}</p>
        <h3>Descripcion</h3>
        <p>{{ sprint.descripcion }}</p>
        <h3>Fecha de inicio</h3>
        <p>
            {% if sprint.fecha_inicio %}
                {{ sprint.fecha_inicio }}
            {% else %}
                Por definir
            {% endif %}
        </p>
        <h3>Fecha final</h3>
        <p>{% if sprint.fecha_fin %}
                {{ sprint.fecha_fin }}
            {% else %}
                Por definir
            {% endif %}
        </p>
        <h3>Duracion</h3>
        <p>{{ sprint.duracion }} dias</p>
        <h3>Capacidad de trabajo</h3>
        <p>{{ sprint.capacidad }} horas</p>
    </div><br>
    <div class="enlace">
        {% if sprint.estado == 'Planificacion' %}
            {% if "Iniciar Sprint" in permisos and not proyecto.estado == "Planificacion" %}
                <button class="boton" onclick="location.href='{% url 'sprints:iniciar_proyecto' sprint.id proyecto.id %}'">Iniciar</button>
            {% endif %}
        {% elif sprint.estado == 'En ejecucion' %}
            {% if "Finalizar Sprint" in permisos %}
                <button class="boton" onclick="location.href='{% url 'sprints:finalizar_proyecto' sprint.id proyecto.id %}'">Finalizar</button>
            {% endif %}
            {% if "Cancelar Sprint" in permisos %}
                <button class="boton" onclick="location.href='{% url 'sprints:cancelar_proyecto' sprint.id proyecto.id %}'">Cancelar</button>
            {% endif %}
        {% endif %}
        {% if "Visualizar Sprint Backlog" in permisos %}
            <a href="{% url 'sprints:sprint_backlog' sprint.id proyecto.id %}">Sprint Backlog</a>
        {% endif %}
        <a href="{% url 'sprints:listar_desarrolladores' sprint.id proyecto.id %}">Desarrolladores</a>
        {% if "Visualizar Tablero" in permisos and not sprint.estado == 'Planificacion' %}
            <a href="{% url 'tableros:index' sprint.id proyecto.id %}">Tablero Kanban</a>
        {% endif %}
        <a href="{% url 'sprints:index' proyecto.id %}">Volver</a>
    </div><br><br>
{% endblock cuerpo %}